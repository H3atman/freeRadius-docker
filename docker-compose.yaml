version: '3.8'

services:
  freeradius:
    image: freeradius/freeradius-server:latest
    container_name: freeradius
    restart: unless-stopped
    ports:
      - "1812:1812/udp"
      - "1813:1813/udp"
    environment:
      - TZ=UTC
    volumes:
      - ./config:/etc/freeradius/mods-config/files:ro
      - ./logs:/var/log/freeradius:rw
    healthcheck:
      test: ["CMD-SHELL", "radclient -c 1 127.0.0.1:1812 status testing123 2>&1 | grep -q 'Received' || exit 1"]
      interval: 60s
      timeout: 10s
      retries: 2
      start_period: 60s
